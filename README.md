# Домашнее задание по теме «Работа с файлами CSV, XML, JSON»
*JDCP-6_E.Orlov_HomeWork25*

## Задача 1 (обязательная)
⚠️ Эта задача является продолжением задачи про сериализацию (тема «Потоки ввода-вывода. Работа с файлами. Сериализация»), поэтому для выполнения этой задачи лучше сперва получить по ней зачёт.

Возьмите репо с решением задачи про сериализацию и отведите новую ветку `json` от `main`.

Создайте класс `ClientLog` для сохранения всех операций, которые ввёл пользователь. Т.е. покупатель добавил покупку, то это действие должно быть там сохранено. Для этого создайте там метод `log(int productNum, int amount)`. Также у объекта этого класса должен быть метод `exportAsCSV(File txtFile)` для сохранения всего журнала действия в файл в формате `csv`. Пример файла который должен получиться:
```java
productNum,amount
3,4
1,1
3,2
5,12
```
В конце работы программы сохраняйте журнал действий в файл `log.csv`.

Также вместо вызова метода `saveTxt` в методе `main` сериализуйте корзину в json-формате в файл `basket.json`. Аналогично при старте программы загружайте корзину десериализацией из json-а из файла `basket.json`, а не из обычной текстовой сериализации как было до того. При этом логику сериализации в методах в классе корзины трогать не нужно.

Коммит и пуш в ветку `json`.

#

## Задача 2 (обязательная)
Эту задачу делайте в том же репозитории и ветке, что и первую.

В корне вашего проекта разместите: `shop.xml` с содержимым:
```java
<config>
  <load>
    <enabled>false</enabled>
    <fileName>basket.json</fileName>
    <format>json</format>
  </load>
  
  <save>
    <enabled>true</enabled>
    <fileName>basket.json</fileName>
    <format>json</format>
  </save>
  
  <log>
    <enabled>true</enabled>
    <fileName>client.csv</fileName>
  </log>
</config>
```
При старте ваша программа должна считывать этот файл и загружать из него настройки:

блок `load` говорит нужно ли загружать данные корзины при старте программы из файла (`enabled`), указывает имя этого файла (`fileName`) и формат (`json` или `text`). Ваша программа должна вести себя соответствующим образом.
блок `save` говорит нужно ли сохранять данные корзины после каждого ввода, куда и в каком формате (`text` или `json`).
блок `log` говорит нужно ли сохранять лог при завершении программы и в какой файл; формат лога всегда `csv`.
Сделайте коммит и пуш в ветку `json`.

---
## Домашнее задание по теме «Потоки ввода-вывода. Работа с файлами. Сериализация»
[*JDCP-6_E.Orlov_HomeWork23*](https://github.com/UniMWS/JDCP-6_E.Orlov_HWork23)

### Задача 1 (обязательная)
⚠️ Эта задача является продолжением задачи по теме «Одномерные массивы», поэтому для выполнения этой задачи нужно сперва получить по ней зачёт.

Возьмите реплит с решением задачи про магазин или решите её заново сразу в соответствии с новыми требованиями. Несмотря на то, что та задача решалась в реплите, эти мы сдаём через гитхаб. Требования исходного условия задания сохраняются и в этой задаче.

Создайте класс `Basket`, объект которого будет представлять себе покупательскую корзину. В нём должны быть методы:

+ конструктор, принимающий массив цен и названий продуктов;
+ `addToCart(int productNum, int amount)` - метод добавления `amount` штук продукта номер `productNum` в корзину;
+ `printCart()` - метод вывода на экран покупательской корзины.
+ `saveTxt(File textFile)` - метод сохранения корзины в текстовый файл; использовать встроенные сериализаторы нельзя;
+ `static Basket loadFromTxtFile(File textFile)` - статический(!) метод восстановления объекта корзины из текстового файла, в который ранее была она сохранена;
+ геттеры, которые вы посчитаете нужными.

После ввода каждой покупки пользователем вам следует сохранять пользовательскую корзину в файл `basket.txt`. При старте программа должна искать этот файл в корне проекта и если он находится, восстанавливать корзину из него; если файл не найдет, то стоит начать с пустой корзины.

Коммит и пуш в ветку `main`.

#

***Подсказки***
Если все данные у вас хранятся в массивах, то просто сохраните по массиву на каждой строке.

Например, если бы это был лонговый массив в поле нашей корзины, то можно было бы сделать так:
```java
public void saveTxt(File textFile) throws IOException {
    try (PrintWriter out = new PrintWriter(file);) {
        ...
        for (long e : longArrInField)    
            out.print(e + " ");
        }
        ...
    }
}
```
А при чтении вы сможете строку файла разбить через `split(" ")` и пройдясь циклом каждое значение превратить в `long`.

#

### Задача 2 (обязательная)
Эту задачу делаем в том же репозитории. Отведите ветку `serial` от `main`, в которой находится решение первой задачи.

В этом задании мы будем сохранять и восстанавливать корзину покупок через встроенную сериализацию в Java.

Добавьте метод `saveBin(File file)` для сохранения в файл в бинарном формате.

Добавьте метод `static loadFromBinFile(File file)` для загрузки корзины из бинарного файла.

Используйте для этого сериализацию и десериализацию. Замените в `main` сохранение и загрузку из текстового файла на бинарный (название пусть будет `basket.bin`).

Коммит и пуш в ветку `serial`.

---
### Домашнее задание по теме «Массивы одномерные» (ДЗ-7)
[*JDCP-6_E.Orlov_Homework-7*](https://replit.com/@EugeneOrlovJDCP/BurdensomeStickyScans)

#### Задача 1 (обязательная)
Вы пишете программу, планирующую продуктовую корзину.
У вас есть список доступных продуктов в одном массиве и соответствующая им цена в другом массиве. Пользователь вводит номер продукта из первого списка и количество продуктов этого вида, которое хочет купить. Программа добавляет указанное количество выбранного продукта в итоговую сумму продуктовой корзины. Действие повторяется до тех пор, пока пользователь не введет команду “end”. Только после этого выводится вся корзина выбранных товаров и итоговая сумма.

**Функционал программы**

1. Создание массива продуктов внутри программы (без пользовательского ввода);
2. Создание массива цен на продукты (без пользовательского ввода);
3. Вывод списка доступных для покупки продуктов на экран;
4. Возможность ввода пользователем одной строкой номера продукта и количества для добавления в корзину;
5. Пользователь может добавлять несколько раз один и тот же товар в корзину, в этом случае он должен суммироваться;
6. Вывод всех покупок, их общую стоимость и количество, на экран после ввода всех покупок.

**Пример работы**
```java
Список возможных товаров для покупки
1. Молоко 50 руб/шт
2. Хлеб 14 руб/шт
3. Гречневая крупа 80 руб/шт
Выберите товар и количество или введите `end`
1 10 <enter>
Выберите товар и количество или введите `end`
3 1 <enter>
Выберите товар и количество или введите `end`
end <enter>
Ваша корзина:
Молоко 10 шт 50 руб/шт 500 руб в сумме
Гречневая крупа 1 шт 80 руб/шт 80 руб в сумме
Итого 580 руб
```
**Подсказки**
Итак, у нас есть список доступных продуктов в одном массиве:

`String[] products = {"Хлеб", "Яблоки", "Молоко"};`

и соответствующие цены в другом массиве:

`int[] prices = {100, 200, 300};`

При запуске программы необходимо вывести продукты и цены на экран пользователя:
```java
for (int i = 0; i < products.length; i++) {
  ???
}
```
Нам надо придумать где и как будем хранить информацию о выбранных товарах. Мы предлагаем вам следующий вариант: заведите массив, где в каждой ячейке будет храниться выбранное пользователем количество того товара, чей номер совпадает с номером ячейки.

Дальше заводим цикл `while (true)`. В нём нужно создать переменные, в которых сохраняются значения, вводимые пользователем. Допустим, что:

+ для номера продукта — это переменная: `int productNumber = 0;`
+ для количества это — переменная: `int productCount = 0;`
+ по номеру, например, можно найти цену продукта в массиве цен: `int currentPrice = prices[productNumber];`

Для проверки на ввод end использовать `inputString.equals("end")`, оператор == со строками не работает.

Напомним, что для приведения текста в числовой тип можно использовать `Integer.parseInt(inputString)`

Для подсчёта итоговой суммы чека заведите до цикла переменную `int sumProducts = 0;` и обновляйте её в соответствии с тем, что вводит пользователь.

После того как пользователь введет `end`, программа выйдет из цикла. На экран нужно вывести корзину и итоговую сумму продуктовой корзины.

---
#### Домашнее задание по теме «Исключения, Stacktrace» (ДЗ-12)
[*JDCP-6_E.Orlov_Homework12*](https://replit.com/@EugeneOrlovJDCP/OpaqueMulticoloredPassword)

##### Задача 1 (обязательная)
⚠️ Эта задача является продолжением задачи про одномерные массивы, поэтому для выполнения этой, лучше сперва получить зачёт по предыдущей.

Возьмите вашу программу про магазин из задачи про одномерные массивы. В этой задаче мы будем добавлять логику обработки ошибок. Рассмотрим пользовательский ввод новой покупки:

1. Если пользователь сделал ввод не из двух частей, а из одной или более двух, напишите об этом пользователю в консоль и перейдите к следующей итерации цикла. Делать это нужно через `if`, выкидывать исключения не нужно.
2. Если введённые пользователем данные числа не подходят на роль номера продукта (слишком большое или неположительное) или количество (т.е. неположительное число), напишите об этом пользователю. Делать это нужно через `if`, выкидывать исключения не нужно.
3. Если пользователь вместо чисел ввёл неподходящий текст, который не может распарситься через `Integer.parseInt`, напишите это пользователю. Для этого вам надо посмотреть, какое исключение кидает `Integer.parseInt` на неподходящих данных, поймать его и обработать в виде вывода соответствующего сообщения пользователю и вызов `continue` для перехода на следующую итерацию.

